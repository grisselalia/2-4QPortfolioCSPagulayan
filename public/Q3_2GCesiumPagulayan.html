<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sample Form</title>
    <link rel="icon" href="" type="image/png">
    <style>
        form {
            background-color:rgb(235, 206, 211);
            font-family:Verdana, Tahoma, sans-serif;
            box-shadow: 3px 6px 8px #888888;
            border-radius: 15px;
        }        
        form label {
            color:rgb(59, 44, 34);
        }
        input:focus {
            background-color:rgb(180, 150, 155);
        }
        select:focus {
            background-color:rgb(180, 150, 155);
        }
        textarea:focus {
            background-color:rgb(180, 150, 155);
        }
        legend {
            color:rgb(26, 16, 9);
        }
        fieldset {
            color:rgb(180, 150, 155);
            border-radius: 15px;
        }
    </style>
</head>
<body>
    <h1>Club Application Form</h1>
    <form onsubmit="return validateSubmission();" onreset="return validateReset();">

    <fieldset>
        <legend>Student Information</legend><br/>

        <label> Student ID: 
            <input type="number" id="sID" name="sID" required onblur="checkEmpty(this)"/>
        </label><br/><br/>

        <label> Full Name: 
            <input type="text" id="name" name="name" required onblur="checkEmpty(this)" />
        </label><br/><br/>
        <label> Birthday:
            <input type="date" id="bday" name="bday" required onblur="checkEmpty(this)"/>
        </label><br/><br/>
        <label> Email Address: 
            <input type="email" id="email" name="email" required onblur="checkEmpty(this)" />
        </label><br/><br/>
        <label> Mobile Phone: 
            <input type="text" id="phone" name="phone" required onblur="checkEmpty(this)"/>
        </label><br/><br/>
    </fieldset>

    <fieldset>
        <legend>Club Membership Information</legend><br/>
        <label> Grade Level:
            <select id="grLvl" name="grLvl" required onblur="checkEmpty(this)">
                <option value="">Select your grade level</option>
                <option value="7">Grade 7</option>
                <option value="8">Grade 8</option>
                <option value="9">Grade 9</option>
                <option value="10">Grade 10</option>
                <option value="11">Grade 11</option>
                <option value="12">Grade 12</option>
            </select>
        </label><br/><br/>
        <label> Intern / Extern:</label>
            <input type="radio" name="home" value="intern" required /> Intern
            <input type="radio" name="home" value="extern" required/> Extern
            <br/><br/>
        <label> Preferred Organization / Club: 
            <select id="prefClub" name="prefClub" required onblur="checkEmpty(this)">
                <option value="">Select a club</option>
                <option value="astro">AstroSoc</option>
                <option value="bake">Bake Club</option>
                <option value="expo">Exposure</option>
                <option value="karyo">Karyo Biomedical Society</option>
                <option value="sagala">Sagala</option>
            </select>
        </label><br/><br/>
        <label> Why do you want to join? 
            <textarea name="why" rows="4" required onblur="checkEmpty(this)">
            </textarea>
        </label>
    </fieldset>

    <fieldset>
        <legend>Action Buttons</legend><br/>
        <input type="submit" value="Submit">
        <input type="button" onclick="goToView()" value="View Sign-Ups">
        <input type="reset" value="Reset">
      </fieldset> 

    </form>

    <script>
        function validateSubmission() {
    if (!confirm("Are you sure you want to submit your application?")) {
      return false;
    }

     const form = document.forms[0];
    
    // Get existing signups
    let signUps = JSON.parse(localStorage.getItem("signUps")) || [];

    // Check for duplicate student ID
    const studentId = form.sID.value;
    const duplicate = signUps.find(s => s.sID === studentId);
    
    if (duplicate) {
      alert("This Student ID has already been registered!");
      return false;
    }

    // Create new signup object
    const newSignup = {
      sID: studentId,
      name: form.name.value,
      bday: form.bday.value,
      email: form.email.value,
      phone: form.phone.value,
      grLvl: form.grLvl.value,
      home: form.home.value,
      prefClub: form.prefClub.value,
      why: form.why.value
    };

    // Save to localStorage
    signUps.push(newSignup);
    localStorage.setItem("signUps", JSON.stringify(signUps));

    alert("Sign-up saved successfully!");
    form.reset();

    return false;
  }

  function goToView() {
    window.location.href = "Q3_3GCesiumPagulayan.html";
  }

  function validateReset() {
    return confirm("Are you sure you want to reset the form?");
  }

  function checkEmpty(field) {
    if (field.value.trim() === "") {
      field.classList.add("error");
      field.classList.remove("valid");
    } else {
      field.classList.remove("error");
      field.classList.add("valid");
    }
  }
</script>

</body>
    </script>
</body>
</html>